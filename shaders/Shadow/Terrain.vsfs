#ifdef __VERTEX__

#version 130

in vec4 pos;

struct Light {
  mat4 view;
  mat4 proj;
  mat4 model;
};

uniform mat4 heightmapScale;
uniform Light light;
uniform vec2 offset;
uniform sampler2D heights;

uniform mat4 lightMVP;

void main() {
  float y = texture(heights, pos.zw).x;
  vec4 newPos = vec4(pos.x + offset.x, y, pos.y + offset.y, 1.0);
  newPos = heightmapScale * newPos;
  gl_Position = lightMVP * newPos;
}

#endif
#ifdef __FRAGMENT__

#version 130

void main() {}

#endif